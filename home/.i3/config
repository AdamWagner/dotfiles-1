#################
# Set variables #
#################
# Windows = Mod4
# Alt     = Mod1

set $mod Mod4
set $browser google-chrome-stable
set $term urxvt -e /bin/zsh

# Gaps patch from https://github.com/Airblader/i3
set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
# gaps inner 4
# gaps outer 2
bindsym $mod+Shift+g mode "$mode_gaps"

mode "$mode_gaps" {
  bindsym o      mode "$mode_gaps_outer"
  bindsym i      mode "$mode_gaps_inner"
  bindsym Return mode "default"
  bindsym Escape mode "default"
}

mode "$mode_gaps_inner" {
  bindsym plus  gaps inner current plus 5
  bindsym minus gaps inner current minus 5
  bindsym 0     gaps inner current set 0
  bindsym Shift+plus  gaps inner all plus 5
  bindsym Shift+minus gaps inner all minus 5
  bindsym Shift+0     gaps inner all set 0
  bindsym Return mode "default"
  bindsym Escape mode "default"
}

mode "$mode_gaps_outer" {
  bindsym plus  gaps outer current plus 5
  bindsym minus gaps outer current minus 5
  bindsym 0     gaps outer current set 0
  bindsym Shift+plus  gaps outer all plus 5
  bindsym Shift+minus gaps outer all minus 5
  bindsym Shift+0     gaps outer all set 0
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

#Make windows play nice with gaps and don't give them a title in tiling mode
new_window 1pixel
for_window [class="^.*"] border pixel 1
bindsym Control+Shift+1 [class="^.*"] border toggle

set $dmenu_command exec dmenu_run -h 20 -w 500 -x 420 -y 23 -fn Terminus -nb "#2c2f3d" -nf "#e9ca92" -sb "#2c2f3d" -sf "#c76622"
# start dmenu (a program launcher)
# bindsym $mod+d exec dmenu_run -b -f  -i -l 3 -p "$(whoami)@$(hostname)" -nb "#2d2d2d" -nf "#cccccc" -sb "#515151" -sf "#f99157"
bindsym $mod+d $dmenu_command
bindsym $mod+space $dmenu_command

# change focus
# default keys altered to match those of vim
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

#Bind audio keys for volume
bindsym XF86AudioRaiseVolume exec amixer -q set Master 5%+ unmute
bindsym XF86AudioLowerVolume exec amixer -q set Master 5%- unmute
bindsym $mod+XF86AudioRaiseVolume exec "amixer -D pulse sset Master '10%+'"
bindsym $mod+XF86AudioLowerVolume exec "amixer -D pulse sset Master '10%-'"
bindsym XF86AudioMute exec amixer -q set Master toggle

# Brightness shit
bindsym XF86MonBrightnessUp exec xbacklight +10 -time 0
bindsym XF86MonBrightnessDown exec xbacklight -10 -time 0
bindsym $mod+XF86MonBrightnessUp exec xbacklight =100 -time 10

# move focused window
# default keys altered to match those of vim
bindsym $mod+Shift+H move left
bindsym $mod+Shift+J move down
bindsym $mod+Shift+K move up
bindsym $mod+Shift+L move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horiZontal orientation (Tall)
# need to change this because "Mod+h" no longer free
bindsym $mod+z split h
# split in vertical orientation
bindsym $mod+v split v
# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen
# change container layout (stacked, tabbed, default)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout default
# toggle tiling / floating
bindsym $mod+Shift+space floating toggle
# change focus between tiling / floating windows
# bindsym $mod+space focus mode_toggle
# focus the parent container
bindsym $mod+a focus parent

# Set up variables so changing their names doesn't suck
set $WS1 1:WWW
set $WS2 2:EMACS
set $WS3 3:TMUX
set $WS4 4:SPOTIFY
set $WS5 5:WORK
set $WS6 6:MORE
set $WS7 7:STAPH
set $WS8 8:PLS
set $WS9 9:NO
set $WS0 10:DED

# switch to workspace
bindsym $mod+1 workspace $WS1
bindsym $mod+2 workspace $WS2
bindsym $mod+3 workspace $WS3
bindsym $mod+4 workspace $WS4
bindsym $mod+5 workspace $WS5
bindsym $mod+6 workspace $WS6
bindsym $mod+7 workspace $WS7
bindsym $mod+8 workspace $WS8
bindsym $mod+9 workspace $WS9
bindsym $mod+0 workspace $WS0

# move focused container to workspace
bindsym $mod+Shift+exclam           move workspace $WS1
bindsym $mod+Shift+at               move workspace $WS2
bindsym $mod+Shift+numbersign       move workspace $WS3
bindsym $mod+Shift+dollar           move workspace $WS4
bindsym $mod+Shift+percent          move workspace $WS5
bindsym $mod+Shift+dead_circumflex  move workspace $WS6
bindsym $mod+Shift+ampersand        move workspace $WS7
bindsym $mod+Shift+asterisk         move workspace $WS8
bindsym $mod+Shift+parenleft        move workspace $WS9
bindsym $mod+Shift+parenright       move workspace $WS0

bindsym $mod+r mode "resize"
# reload the configuration file
bindsym $mod+Shift+C reload

# restart i3 inplace
bindsym $mod+Shift+R restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+E exit
# resize window (you can also use the mouse for that)
mode "resize" {
# These bindings trigger as soon as you enter the resize mode
# They resize the border in the direction you pressed, e.g.
# when pressing left, the window is resized so that it has
# more space on its left
bindsym h resize shrink left 10 px or 10 ppt
bindsym Shift+H resize grow left 10 px or 10 ppt
bindsym j resize shrink down 10 px or 10 ppt
bindsym Shift+J resize grow down 10 px or 10 ppt
bindsym k resize shrink up 10 px or 10 ppt
bindsym Shift+K resize grow up 10 px or 10 ppt
bindsym l resize shrink right 10 px or 10 ppt
bindsym Shift+L resize grow right 10 px or 10 ppt
# same bindings, but for the arrow keys
bindsym Left resize shrink left 10 px or 10 ppt
bindsym Shift+Left resize grow left 10 px or 10 ppt
bindsym Down resize shrink down 10 px or 10 ppt
bindsym Shift+Down resize grow down 10 px or 10 ppt
bindsym Up resize shrink up 10 px or 10 ppt
bindsym Shift+Up resize grow up 10 px or 10 ppt
bindsym Right resize shrink right 10 px or 10 ppt
bindsym Shift+Right resize grow right 10 px or 10 ppt
# back to normal: Enter or Escape
bindsym Return mode "default"
bindsym Escape mode "default"
}

#####################
# i3bar and i3status
#####################

bar {
  position top
  status_command ~/.i3/stat.sh
  colors {
	# Whole color settings
	background #2c2f3d
	statusline #e9ca92
	separator  #c76622

                      #border  #bg      #text
  focused_workspace 	#2c2f3d	 #2c2f3d  #c76622
  active_workspace  	#2c2f3d	 #2c2f3d  #e9ca92
  inactive_workspace	#2c2f3d	 #2c2f3d  #e9ca92
  urgent_workspace	  #2c2f3d  #2c2f3d  #c93939
  }
  workspace_buttons yes
  strip_workspace_numbers yes
}

##### Border Style #####
# Border Size
new_window pixel 3
new_float pixel 3

# Border Colors Set
set $FOCUS	#c76622
set $UNFOCUS	#e9ca92


# Border Colors
# class			border   backgr.  text	 indicator
client.focused		$FOCUS   $FOCUS   $FOCUS $FOCUS
client.focused_inactive $UNFOCUS $UNFOCUS $UNFOCUS $UNFOCUS
client.unfocused	$UNFOCUS $UNFOCUS $UNFOCUS $UNFOCUS
client.urgent		$FOCUS	 $FOCUS	  $FOCUS   $FOCUS

#####################
# Start up commands
#####################

# hide mouse when don't need
exec --no-startup-id unclutter
# CAPS LOCK to ctrl (aka life saver)
exec --no-startup-id setxkbmap -option ctrl:nocaps
# two finger scrolling
exec --no-startup-id xinput set-prop "SynPS/2 Synaptics TouchPad" "Synaptics Scrolling Distance" -107, -107s
# wifi applet
exec --no-startup-id nm-applet
# stop that damn beeping
exec --no-startup-id xset -b
# flu.x for the eyes
exec --no-startup-id xflux -z 22904
# key repeat to faster
exec --no-startup-id xset r rate 250 50
# gotta sync those files
exec --no-startup-id dropbox
# background
exec --no-startup-id nitrogen --restore
#######################
# Custom exec commands
#######################

####################################################################################
# KEYBOARD GUIDE
# THESE ARE ALL THE MAPPING OF $mod+
####################################################################################
# TOP ROW
####################################################################################
# q    w   e    r      t y u i o p [ ] \
# quit tab norm resize ? ? ? ? ? ? ? ? ?
####################################################################################
# MIDDLE ROW
####################################################################################
# a          s     d     f    g h    j    k  l     ; '
# sel-parent stack dmenu full ? left down up right ? ?
####################################################################################
# BOTTOM ROW
####################################################################################
# z       x           c         v       b        n          m    ,      .        /
# split-h bright-down bright-up split-v $browser play/pause mute vol-up vol-down ?
####################################################################################

# open term
bindsym $mod+Return exec $term
# x = volume down c = volume up
bindsym $mod+x exec amixer -q set Master 5%- unmute
bindsym $mod+c exec amixer -q set Master 5%+ unmute
# m for mute
bindsym $mod+m exec amixer -q set Master toggle
# n is next to m and toggles play or pause
bindsym $mod+n exec mpc toggle
bindsym $mod+b exec $browser
# comma = brightness down period = brightness up
bindsym $mod+comma exec xbacklight -10 -time 0
bindsym $mod+period exec xbacklight +10 -time 0
# kill window
bindsym $mod+q kill
bindsym Print exec scrot -q 100 '%Y-%m-%d-%T_$wx$h_scrot.png' -e 'mv $f ~/dotfiles/screenshots'
# screen locking
